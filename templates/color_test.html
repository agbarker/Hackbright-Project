{% extends 'base.html' %}
{% block content %}

<div class="well spaced" style="width:40%;">

<div id="container">
  C Major Scale
  <div id="c"></div>
</div>
<div id="controls">
  <button id='success-note'>Success Note</button>
</div>
<div id="controls">
  <button id='fail-note'>Fail Note</button>
</div>

<script type="text/javascript">


// Basic setup boilerplate for using VexFlow with the SVG rendering context:
VF = Vex.Flow;

var div = document.getElementById("c")
var renderer = new VF.Renderer(div, VF.Renderer.Backends.SVG);

renderer.resize(500, 100);
var context = renderer.getContext();


// Create a stave of width 400 at position x10, y40 on the canvas.
var stave = new VF.Stave(10, 0, 400);
// Add a clef and time signature.
stave.addClef("treble").addTimeSignature("4/4");
// Connect it to the rendering context and draw!
stave.setContext(context).draw();

var notes = [
  // A quarter-note C.
  {clef: "treble", keys: ["c/4"], duration: "q" },

  {clef: "treble", keys: ["d/4"], duration: "q" },

  {clef: "treble", keys: ["e/4"], duration: "q" },

  {clef: "treble", keys: ["f/4"], duration: "q" },

  {clef: "treble", keys: ["g/4"], duration: "q" },

  {clef: "treble", keys: ["a/4"], duration: "q" },

  {clef: "treble", keys: ["b/4"], duration: "q" },

  {clef: "treble", keys: ["c/5"], duration: "q" } 
  
];

var stave_notes = notes.map(function(note) { return new VF.StaveNote(note); });


// Create a voice in 4/4 and add above notes
var voice = new VF.Voice({num_beats: 8,  beat_value: 4});
voice.addTickables(stave_notes);

// Format and justify the notes to 400 pixels.
var formatter = new VF.Formatter().joinVoices([voice]).format([voice], 300);

// Render voice
voice.draw(context, stave);


var i = 0

document.getElementById('fail-note').addEventListener('click', (e) => {
  stave_notes[i].setKeyStyle(0, { fillStyle: 'red'});
  i += 1;
  voice.draw(context, stave);

});

document.getElementById('success-note').addEventListener('click', (e) => {
  stave_notes[i].setKeyStyle(0, { fillStyle: 'blue'});
  i += 1;
  voice.draw(context, stave);

});



</script>
    





</div>
{% endblock %}